<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ozz.dao.StepDAO">
	<insert id="StepwriteOk">
		insert into t_mission_step(step_no, mission_no, step, step_title, step_content, step_time, mission_skill, userid)
		values(step_no_seq.nextval, #{mission_no}, #{step}, #{step_title}, #{step_content}, #{step_time}, #{mission_skill}, #{userid})
	</insert>
	
	<select id="Steplist" resultType="kr.or.ozz.dto.StepDTO">
        SELECT step_no, step, step_title, step_time, mission_skill FROM t_mission_step
        ORDER BY step_no ASC
	</select>
	
	<select id="getStep" resultType="kr.or.ozz.dto.StepDTO">
		select mission_no, step, step_title, step_content, step_time, mission_skill, userid
		from t_mission_step
		<!-- where mission_no = ${param1} -->
	</select>
	
	<update id="MissionEdit">
		update t_mission set mission_title=#{mission_title}, mission_content=#{mission_content}, mission_tag=#{mission_tag},
		mission_data=#{mission_data}, mission_tool=#{mission_tool}, mission_cate=#{mission_cate}, created_at=sysdate
		where mission_no=${mission_no} and userid=#{userid}
	</update>
	<delete id="MissionDel">
		delete from t_mission where mission_no=${param1} and userid=#{param2}
	</delete>
</mapper>